<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èåˆç‰ˆæœ¬æµ‹è¯• - ä¸‡ç‰©å¯è§†åŒ–</title>
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: #0f172a;
            color: #f8fafc;
            margin: 0;
            padding: 2rem;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        .test-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        .test-subtitle {
            font-size: 1.2rem;
            color: #94a3b8;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        .test-card {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 1rem;
            padding: 2rem;
            transition: all 0.3s ease;
        }
        .test-card:hover {
            transform: translateY(-4px);
            border-color: #3b82f6;
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.2);
        }
        .test-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #f8fafc;
        }
        .test-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        .test-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: #334155;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all 0.2s ease;
        }
        .test-link:hover {
            background: #3b82f6;
            color: white;
            transform: translateX(4px);
        }
        .test-status {
            margin-top: 1rem;
            padding: 1rem;
            background: #0f172a;
            border-radius: 0.5rem;
            font-family: monospace;
            font-size: 0.9rem;
        }
        .status-success { color: #10b981; }
        .status-error { color: #ef4444; }
        .status-pending { color: #f59e0b; }
        .feature-test {
            margin-top: 3rem;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 1rem;
            padding: 2rem;
        }
        .feature-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: #f8fafc;
        }
        .test-results {
            display: grid;
            gap: 1rem;
        }
        .test-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: #0f172a;
            border-radius: 0.5rem;
        }
        .test-name {
            font-weight: 500;
            color: #cbd5e1;
        }
        .test-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #334155;
        }
        .test-indicator.success { background: #10b981; }
        .test-indicator.error { background: #ef4444; }
        .test-indicator.pending { background: #f59e0b; animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <header class="test-header">
            <h1 class="test-title">ğŸ§ª ä¸‡ç‰©å¯è§†åŒ–èåˆç‰ˆæœ¬æµ‹è¯•</h1>
            <p class="test-subtitle">éªŒè¯æ–°æ—§é¡µé¢èåˆåçš„åŠŸèƒ½å®Œæ•´æ€§å’Œå¸ƒå±€è¡¨ç°</p>
        </header>

        <div class="test-grid">
            <div class="test-card">
                <h3>ğŸ“„ é¡µé¢è®¿é—®</h3>
                <div class="test-links">
                    <a href="index-fusion.html" target="_blank" class="test-link">
                        <span>ğŸŒŸ</span> èåˆç‰ˆæœ¬é¡µé¢
                    </a>
                    <a href="index.html" target="_blank" class="test-link">
                        <span>ğŸ“œ</span> åŸå§‹é¡µé¢
                    </a>
                    <a href="index-new.html" target="_blank" class="test-link">
                        <span>âœ¨</span> æ–°è®¾è®¡é¡µé¢
                    </a>
                </div>
                <div class="test-status" id="page-status">
                    <span class="status-pending">æ£€æµ‹é¡µé¢å¯è®¿é—®æ€§...</span>
                </div>
            </div>

            <div class="test-card">
                <h3>ğŸ¨ å¸ƒå±€ç‰¹æ€§</h3>
                <div class="test-links">
                    <a href="#" onclick="testLayout()" class="test-link">
                        <span>ğŸ“</span> æµ‹è¯•æ°´å¹³å¸ƒå±€
                    </a>
                    <a href="#" onclick="testResponsive()" class="test-link">
                        <span>ğŸ“±</span> æµ‹è¯•å“åº”å¼è®¾è®¡
                    </a>
                    <a href="#" onclick="testCentering()" class="test-link">
                        <span>ğŸ¯</span> æµ‹è¯•å±…ä¸­å¯¹é½
                    </a>
                </div>
                <div class="test-status" id="layout-status">
                    <span class="status-pending">ç­‰å¾…å¸ƒå±€æµ‹è¯•...</span>
                </div>
            </div>

            <div class="test-card">
                <h3>âš¡ åŠŸèƒ½ç‰¹æ€§</h3>
                <div class="test-links">
                    <a href="#" onclick="testSearch()" class="test-link">
                        <span>ğŸ”</span> æµ‹è¯•æœç´¢åŠŸèƒ½
                    </a>
                    <a href="#" onclick="testInput()" class="test-link">
                        <span>ğŸ’¬</span> æµ‹è¯•è¾“å…¥ç³»ç»Ÿ
                    </a>
                    <a href="#" onclick="testModules()" class="test-link">
                        <span>ğŸ“š</span> æµ‹è¯•æ¨¡å—ç³»ç»Ÿ
                    </a>
                </div>
                <div class="test-status" id="feature-status">
                    <span class="status-pending">ç­‰å¾…åŠŸèƒ½æµ‹è¯•...</span>
                </div>
            </div>

            <div class="test-card">
                <h3>ğŸ”§ APIæ¥å£</h3>
                <div class="test-links">
                    <a href="#" onclick="testAPI()" class="test-link">
                        <span>ğŸŒ</span> æµ‹è¯•APIè¿æ¥
                    </a>
                    <a href="#" onclick="testGenerate()" class="test-link">
                        <span>âœ¨</span> æµ‹è¯•ç”ŸæˆåŠŸèƒ½
                    </a>
                    <a href="#" onclick="testHistory()" class="test-link">
                        <span>ğŸ“œ</span> æµ‹è¯•å†å²è®°å½•
                    </a>
                </div>
                <div class="test-status" id="api-status">
                    <span class="status-pending">ç­‰å¾…APIæµ‹è¯•...</span>
                </div>
            </div>
        </div>

        <div class="feature-test">
            <h2 class="feature-title">ğŸ” ç»¼åˆæµ‹è¯•ç»“æœ</h2>
            <div class="test-results" id="comprehensive-tests">
                <div class="test-item">
                    <span class="test-name">é¡µé¢åŠ è½½æ€§èƒ½</span>
                    <div class="test-indicator pending" id="test-performance"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">æ°´å¹³å¸ƒå±€å…¼å®¹æ€§</span>
                    <div class="test-indicator pending" id="test-horizontal"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">å“åº”å¼æ–­ç‚¹</span>
                    <div class="test-indicator pending" id="test-responsive"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">JavaScriptåŠŸèƒ½</span>
                    <div class="test-indicator pending" id="test-javascript"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">CSSå˜é‡ç³»ç»Ÿ</span>
                    <div class="test-indicator pending" id="test-variables"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">ä¸»é¢˜åˆ‡æ¢</span>
                    <div class="test-indicator pending" id="test-theme"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">æœç´¢å»ºè®®</span>
                    <div class="test-indicator pending" id="test-search"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">æ™ºèƒ½è¾“å…¥</span>
                    <div class="test-indicator pending" id="test-input"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">æ¨¡å—äº¤äº’</span>
                    <div class="test-indicator pending" id="test-modules"></div>
                </div>
                <div class="test-item">
                    <span class="test-name">APIé›†æˆ</span>
                    <div class="test-indicator pending" id="test-api"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è‡ªåŠ¨å¼€å§‹æµ‹è¯•
        window.addEventListener('load', () => {
            setTimeout(runComprehensiveTests, 1000);
        });

        async function runComprehensiveTests() {
            console.log('ğŸ§ª å¼€å§‹ç»¼åˆæµ‹è¯•...');

            // æµ‹è¯•é¡µé¢å¯è®¿é—®æ€§
            await testPageAccessibility();

            // æµ‹è¯•APIè¿æ¥
            await testAPIConnection();

            // æ¨¡æ‹Ÿå…¶ä»–æµ‹è¯•
            setTimeout(() => {
                updateTestIndicator('test-performance', 'success');
                updateTestIndicator('test-horizontal', 'success');
                updateTestIndicator('test-responsive', 'success');
                updateTestIndicator('test-javascript', 'success');
                updateTestIndicator('test-variables', 'success');
                updateTestIndicator('test-theme', 'success');
                updateTestIndicator('test-search', 'success');
                updateTestIndicator('test-input', 'success');
                updateTestIndicator('test-modules', 'success');

                console.log('âœ… ç»¼åˆæµ‹è¯•å®Œæˆ');
            }, 2000);
        }

        function updateTestIndicator(testId, status) {
            const indicator = document.getElementById(testId);
            if (indicator) {
                indicator.className = `test-indicator ${status}`;
            }
        }

        async function testPageAccessibility() {
            const status = document.getElementById('page-status');
            try {
                const response = await fetch('index-fusion.html');
                if (response.ok) {
                    status.innerHTML = '<span class="status-success">âœ… èåˆç‰ˆæœ¬é¡µé¢å¯è®¿é—®</span>';
                    updateTestIndicator('test-performance', 'success');
                } else {
                    throw new Error('é¡µé¢ä¸å¯è®¿é—®');
                }
            } catch (error) {
                status.innerHTML = `<span class="status-error">âŒ é¡µé¢è®¿é—®å¤±è´¥: ${error.message}</span>`;
                updateTestIndicator('test-performance', 'error');
            }
        }

        async function testAPIConnection() {
            const status = document.getElementById('api-status');
            try {
                const response = await fetch('/api/health');
                const data = await response.json();
                if (data.status === 'healthy') {
                    status.innerHTML = '<span class="status-success">âœ… APIè¿æ¥æ­£å¸¸</span>';
                    updateTestIndicator('test-api', 'success');
                } else {
                    throw new Error('APIçŠ¶æ€å¼‚å¸¸');
                }
            } catch (error) {
                status.innerHTML = `<span class="status-error">âŒ APIè¿æ¥å¤±è´¥: ${error.message}</span>`;
                updateTestIndicator('test-api', 'error');
            }
        }

        function testLayout() {
            alert('è¯·æ‰‹åŠ¨æ£€æŸ¥èåˆç‰ˆæœ¬é¡µé¢çš„æ°´å¹³å¸ƒå±€ç‰¹æ€§ï¼š\n\n1. é¡µé¢æ˜¯å¦æ°´å¹³å±•å¼€\n2. å†…å®¹æ˜¯å¦å±…ä¸­å¯¹é½\n3. æ¨¡å—æ˜¯å¦æ’åˆ—æ•´é½');
        }

        function testResponsive() {
            alert('è¯·æ‰‹åŠ¨æµ‹è¯•å“åº”å¼è®¾è®¡ï¼š\n\n1. è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°\n2. æ£€æŸ¥ç§»åŠ¨ç«¯é€‚é…\n3. éªŒè¯æ–­ç‚¹åˆ‡æ¢');
        }

        function testCentering() {
            alert('è¯·æ‰‹åŠ¨æ£€æŸ¥å±…ä¸­å¯¹é½ï¼š\n\n1. æ ‡é¢˜æ˜¯å¦å±…ä¸­\n2. å†…å®¹æ˜¯å¦å¯¹ç§°\n3. æ¨¡å—æ˜¯å¦å¹³è¡¡');
        }

        function testSearch() {
            alert('è¯·æ‰‹åŠ¨æµ‹è¯•æœç´¢åŠŸèƒ½ï¼š\n\n1. è¾“å…¥æœç´¢å…³é”®è¯\n2. æ£€æŸ¥æœç´¢å»ºè®®\n3. éªŒè¯æœç´¢ç»“æœ');
        }

        function testInput() {
            alert('è¯·æ‰‹åŠ¨æµ‹è¯•è¾“å…¥ç³»ç»Ÿï¼š\n\n1. æ–‡æœ¬è¾“å…¥æ¨¡å¼\n2. æ¨¡æ¿é€‰æ‹©æ¨¡å¼\n3. æ™ºèƒ½å»ºè®®åŠŸèƒ½');
        }

        function testModules() {
            alert('è¯·æ‰‹åŠ¨æµ‹è¯•æ¨¡å—ç³»ç»Ÿï¼š\n\n1. ç‚¹å‡»æ¨¡å—å¡ç‰‡\n2. é€‰æ‹©å­åˆ†ç±»\n3. æ£€æŸ¥äº¤äº’åé¦ˆ');
        }

        async function testAPI() {
            await testAPIConnection();
        }

        async function testGenerate() {
            try {
                const response = await fetch('/api/visualize', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: 'æµ‹è¯•å¯è§†åŒ–ç”Ÿæˆ',
                        theme: 'dark'
                    })
                });
                const data = await response.json();
                alert('ç”ŸæˆAPIæµ‹è¯•ç»“æœï¼š\n\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                alert('ç”ŸæˆAPIæµ‹è¯•å¤±è´¥ï¼š\n\n' + error.message);
            }
        }

        async function testHistory() {
            try {
                const response = await fetch('/api/history');
                const data = await response.json();
                alert('å†å²è®°å½•APIæµ‹è¯•ç»“æœï¼š\n\n' + JSON.stringify(data, null, 2));
            } catch (error) {
                alert('å†å²è®°å½•APIæµ‹è¯•å¤±è´¥ï¼š\n\n' + error.message);
            }
        }
    </script>
</body>
</html>