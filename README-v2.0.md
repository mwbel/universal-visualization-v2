# ä¸‡ç‰©å¯è§†åŒ– v2.0 - æ™ºèƒ½ç”Ÿæˆå¹³å°

> **åŸºäºæ–¹æ¡ˆAçš„é›†ä¸­å¼è·¯ç”±æ¶æ„é‡æ„**

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

ä¸‡ç‰©å¯è§†åŒ– v2.0 æ˜¯ä¸€ä¸ªåŸºäºé›†ä¸­å¼è·¯ç”±æ¶æ„çš„æ™ºèƒ½å¯è§†åŒ–ç”Ÿæˆå¹³å°ï¼Œä¸“æ³¨äºç”¨æˆ·è¾“å…¥é©±åŠ¨çš„å¯è§†åŒ–ç”Ÿæˆï¼Œé€šè¿‡AIè‡ªåŠ¨è¯†åˆ«å­¦ç§‘éœ€æ±‚å¹¶ç”Ÿæˆä¸“ä¸šçš„å¯è§†åŒ–å†…å®¹ã€‚

### ğŸ—ï¸ æ¶æ„ç‰¹ç‚¹

- **æ–¹æ¡ˆAï¼šé›†ä¸­å¼è·¯ç”±æ¶æ„** - ç»Ÿä¸€APIç½‘å…³ + å­¦ç§‘Agentç®¡ç†å±‚
- **æç®€å‰ç«¯è®¾è®¡** - ä¸“æ³¨ç”¨æˆ·è¾“å…¥ï¼Œå»é™¤å†—ä½™åŠŸèƒ½
- **æ™ºèƒ½å­¦ç§‘è¯†åˆ«** - è‡ªåŠ¨è¯†åˆ«æ•°å­¦ã€å¤©æ–‡ã€ç‰©ç†ç­‰å­¦ç§‘
- **æ¨¡å—åŒ–åç«¯** - å¯æ‰©å±•çš„Agentç³»ç»Ÿ
- **ç»Ÿä¸€æ¨¡æ¿å¼•æ“** - æ ‡å‡†åŒ–çš„å¯è§†åŒ–ç”Ÿæˆ

## ğŸ“ é¡¹ç›®ç»“æ„

```
ä¸‡ç‰©å¯è§†åŒ–/
â”œâ”€â”€ ğŸ“ backend-v2/                    # æ–°æ¶æ„åç«¯
â”‚   â”œâ”€â”€ main.py                       # ä¸»APIç½‘å…³
â”‚   â”œâ”€â”€ config.py                     # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ agents/                       # å­¦ç§‘Agentç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ __init__.py              # Agentåˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ base_agent.py            # AgentåŸºç±»
â”‚   â”‚   â”œâ”€â”€ mathematics_agent.py     # æ•°å­¦å­¦ç§‘Agent
â”‚   â”‚   â”œâ”€â”€ astronomy_agent.py       # å¤©æ–‡å­¦ç§‘Agent
â”‚   â”‚   â”œâ”€â”€ physics_agent.py         # ç‰©ç†å­¦ç§‘Agent
â”‚   â”‚   â”œâ”€â”€ router_manager.py        # æ™ºèƒ½è·¯ç”±ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ template_engine.py       # ç»Ÿä¸€æ¨¡æ¿å¼•æ“
â”‚   â”œâ”€â”€ static/                       # é™æ€æ–‡ä»¶
â”‚   â””â”€â”€ templates/                    # HTMLæ¨¡æ¿
â”œâ”€â”€ ğŸ“ frontend-v2/                   # æ–°æ¶æ„å‰ç«¯
â”‚   â”œâ”€â”€ index.html                    # å•ä¸€å…¥å£é¡µé¢
â”‚   â”œâ”€â”€ styles/main.css               # ä¸»æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/                          # JavaScriptæ¨¡å—
â”‚       â”œâ”€â”€ app.js                    # ä¸»åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ api-service.js            # APIæœåŠ¡
â”‚       â”œâ”€â”€ ui-controller.js          # UIæ§åˆ¶å™¨
â”‚       â””â”€â”€ template-manager.js       # æ¨¡æ¿ç®¡ç†å™¨
â””â”€â”€ ğŸ“ main-app/                      # åŸæœ‰åº”ç”¨ï¼ˆå½’æ¡£ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.8+
- Node.js 16+ (å¯é€‰ï¼Œç”¨äºå‰ç«¯å¼€å‘)
- ç°ä»£æµè§ˆå™¨

### å®‰è£…ä¾èµ–

```bash
# åç«¯ä¾èµ–
cd backend-v2
pip install fastapi uvicorn jinja2 numpy matplotlib scipy plotly skyfield

# å¦‚æœéœ€è¦å®Œæ•´åŠŸèƒ½
pip install scikit-learn pandas
```

### å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯API
cd backend-v2
python main.py

# æˆ–è€…ä½¿ç”¨uvicorn
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

è®¿é—® `http://localhost:8000` æŸ¥çœ‹åº”ç”¨

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½è·¯ç”±ç³»ç»Ÿ

- **è‡ªåŠ¨å­¦ç§‘è¯†åˆ«** - åŸºäºå…³é”®è¯çš„æ™ºèƒ½åˆ†ç±»
- **å¤šAgentç®¡ç†** - æ¯ä¸ªå­¦ç§‘ç‹¬ç«‹çš„å¤„ç†Agent
- **ç»Ÿä¸€APIæ¥å£** - å•ä¸€å…¥å£å¤„ç†æ‰€æœ‰è¯·æ±‚

### 2. å­¦ç§‘æ”¯æŒ

#### ğŸ“Š æ•°å­¦å­¦ç§‘
- **æ¦‚ç‡ç»Ÿè®¡** - æ­£æ€åˆ†å¸ƒã€äºŒé¡¹åˆ†å¸ƒã€æ³Šæ¾åˆ†å¸ƒç­‰
- **çº¿æ€§ä»£æ•°** - çŸ©é˜µå˜æ¢ã€å‘é‡ç©ºé—´ã€ç‰¹å¾å€¼åˆ†è§£
- **å¾®ç§¯åˆ†** - å‡½æ•°å›¾åƒã€å¯¼æ•°å¯è§†åŒ–

#### ğŸ”­ å¤©æ–‡å­¦ç§‘
- **è¡Œæ˜Ÿè¿åŠ¨** - å¤ªé˜³ç³»è½¨é“æ¨¡æ‹Ÿ
- **å¤©çƒåæ ‡** - æ˜Ÿåº§å¯è§†åŒ–ã€å¤©ä½“ä½ç½®
- **å¤©æ–‡ç°è±¡** - æœˆç›¸ã€æ—¥æœˆé£Ÿã€å­£èŠ‚å˜åŒ–

#### âš›ï¸ ç‰©ç†å­¦ç§‘
- **åŠ›å­¦** - æŠ›ä½“è¿åŠ¨ã€ç®€è°æŒ¯åŠ¨ã€åœ†å‘¨è¿åŠ¨
- **ç”µç£å­¦** - ç”µåœºã€ç£åœºå¯è§†åŒ–
- **æ³¢åŠ¨å­¦** - æ³¢çš„ä¼ æ’­ã€å¹²æ¶‰ã€è¡å°„

### 3. ç”¨æˆ·ç•Œé¢

- **æç®€è¾“å…¥** - è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚
- **å¿«é€Ÿæ¨¡æ¿** - å¸¸ç”¨å¯è§†åŒ–æ¨¡æ¿ä¸€é”®é€‰æ‹©
- **å®æ—¶åé¦ˆ** - ç”Ÿæˆè¿›åº¦å’ŒçŠ¶æ€æç¤º
- **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

## ğŸ“¡ APIæ–‡æ¡£

### æ ¸å¿ƒæ¥å£

#### é€šç”¨å¯è§†åŒ–ç”Ÿæˆ
```http
POST /api/v2/generate
Content-Type: application/json

{
  "prompt": "æ­£æ€åˆ†å¸ƒ å‡å€¼0 æ ‡å‡†å·®1",
  "template_id": "normal_distribution",
  "user_preferences": {
    "title": "æˆ‘çš„å¯è§†åŒ–"
  }
}
```

#### å­¦ç§‘ç‰¹å®šç”Ÿæˆ
```http
POST /api/v2/{subject}/generate
Content-Type: application/json

{
  "prompt": "è¡Œæ˜Ÿè½¨é“è¿åŠ¨",
  "subject": "astronomy"
}
```

#### å­¦ç§‘åˆ†ç±»
```http
POST /api/v2/classify
Content-Type: application/json

{
  "prompt": "æŠ›ä½“è¿åŠ¨ 45åº¦è§’"
}
```

#### è·å–æ¨¡æ¿
```http
GET /api/v2/templates
GET /api/v2/{subject}/templates
```

#### çŠ¶æ€æŸ¥è¯¢
```http
GET /api/v2/status/{generation_id}
```

### å“åº”æ ¼å¼

```json
{
  "success": true,
  "subject": "mathematics",
  "requirement": {
    "concept_type": "distribution",
    "distribution_type": "normal"
  },
  "template": {
    "id": "normal_distribution",
    "name": "æ­£æ€åˆ†å¸ƒ"
  },
  "html_content": "<html>...</html>",
  "generation_id": "uuid-123"
}
```

## ğŸ¨ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

1. **æ‰“å¼€åº”ç”¨** - è®¿é—® `http://localhost:8000`
2. **è¾“å…¥éœ€æ±‚** - åœ¨è¾“å…¥æ¡†æè¿°å¯è§†åŒ–éœ€æ±‚
3. **é€‰æ‹©æ¨¡æ¿**ï¼ˆå¯é€‰ï¼‰- ç‚¹å‡»å¿«é€Ÿæ¨¡æ¿æˆ–ä»æ¨¡æ¿åº“é€‰æ‹©
4. **ç”Ÿæˆå¯è§†åŒ–** - ç‚¹å‡»"å¼€å§‹ç”Ÿæˆ"æŒ‰é’®
5. **æŸ¥çœ‹ç»“æœ** - æŸ¥çœ‹ç”Ÿæˆçš„å¯è§†åŒ–ï¼Œæ”¯æŒä¸‹è½½å’Œåˆ†äº«

### è¾“å…¥ç¤ºä¾‹

```
# æ•°å­¦
æ­£æ€åˆ†å¸ƒ å‡å€¼0 æ ‡å‡†å·®1
äºŒé˜¶è¡Œåˆ—å¼ è®¡ç®—
å‡½æ•°å›¾åƒ y = xÂ² + 2x + 1

# å¤©æ–‡
å¤ªé˜³ç³»å†…è¡Œæ˜Ÿè½¨é“è¿åŠ¨
å¤§ç†Šåº§æ˜Ÿåº§å›¾
æœˆçƒç›¸ä½å˜åŒ–

# ç‰©ç†
45åº¦è§’æŠ›ä½“è¿åŠ¨ åˆé€Ÿåº¦20m/s
ç®€è°æŒ¯åŠ¨ æŒ¯å¹…2 é¢‘ç‡1Hz
ç”µåœºçº¿ ç‚¹ç”µè·
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å­¦ç§‘Agent

1. **åˆ›å»ºAgentç±»**
```python
# backend-v2/agents/new_subject_agent.py
from .base_agent import BaseVisualizationAgent

class NewSubjectAgent(BaseVisualizationAgent):
    def __init__(self):
        super().__init__("new_subject", {...})

    async def parse_requirement(self, prompt: str) -> Dict[str, Any]:
        # å®ç°éœ€æ±‚è§£æé€»è¾‘
        pass

    async def match_template(self, requirement: Dict[str, Any]) -> Optional[Dict[str, Any]]:
        # å®ç°æ¨¡æ¿åŒ¹é…é€»è¾‘
        pass

    async def generate_visualization(self, config: Dict[str, Any]) -> str:
        # å®ç°å¯è§†åŒ–ç”Ÿæˆé€»è¾‘
        pass
```

2. **æ³¨å†ŒAgent**
```python
# backend-v2/agents/router_manager.py
self.agents["new_subject"] = NewSubjectAgent()
```

3. **æ›´æ–°å‰ç«¯é…ç½®**
```javascript
// frontend-v2/js/app.js
const SUPPORTED_SUBJECTS = [..., "new_subject"];
```

### åˆ›å»ºæ–°æ¨¡æ¿

1. **å®šä¹‰æ¨¡æ¿é…ç½®**
```json
{
  "id": "new_template",
  "name": "æ–°æ¨¡æ¿",
  "description": "æ¨¡æ¿æè¿°",
  "subject": "mathematics",
  "parameters": [
    {
      "name": "param1",
      "label": "å‚æ•°1",
      "type": "number",
      "default": 1.0
    }
  ],
  "examples": ["ç¤ºä¾‹è¾“å…¥"]
}
```

2. **åˆ›å»ºHTMLæ¨¡æ¿**
```html
<!-- templates/new_template.html -->
<!DOCTYPE html>
<html>
<!-- æ¨¡æ¿å†…å®¹ -->
</html>
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- **ä»£ç åˆ†å‰²** - æŒ‰éœ€åŠ è½½JavaScriptæ¨¡å—
- **ç¼“å­˜ç­–ç•¥** - æœ¬åœ°å­˜å‚¨å¸¸ç”¨æ¨¡æ¿å’Œç»“æœ
- **å›¾ç‰‡ä¼˜åŒ–** - ä½¿ç”¨WebPæ ¼å¼ï¼Œå®ç°æ‡’åŠ è½½

### åç«¯ä¼˜åŒ–
- **å¼‚æ­¥å¤„ç†** - é•¿æ—¶é—´ç”Ÿæˆçš„ä»»åŠ¡ä½¿ç”¨åå°é˜Ÿåˆ—
- **ç»“æœç¼“å­˜** - ç¼“å­˜ç”Ÿæˆç»“æœå’Œå¸¸ç”¨æ•°æ®
- **è´Ÿè½½å‡è¡¡** - æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **APIè¿æ¥å¤±è´¥**
   - æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
   - ç¡®è®¤ç«¯å£8000å¯ç”¨
   - æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

2. **æ¨¡æ¿åŠ è½½å¤±è´¥**
   - æ£€æŸ¥templatesç›®å½•æƒé™
   - ç¡®è®¤HTMLæ¨¡æ¿æ–‡ä»¶å­˜åœ¨
   - æŸ¥çœ‹åç«¯æ—¥å¿—

3. **å¯è§†åŒ–ç”Ÿæˆå¤±è´¥**
   - æ£€æŸ¥è¾“å…¥æ ¼å¼æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æ‰€éœ€ä¾èµ–åº“å·²å®‰è£…
   - æŸ¥çœ‹ç”Ÿæˆé”™è¯¯è¯¦æƒ…

### æ—¥å¿—æŸ¥çœ‹

```bash
# åç«¯æ—¥å¿—
tail -f logs/app.log

# å¼€å‘æ¨¡å¼
python main.py --log-level DEBUG
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/new-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add new feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-feature`)
5. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸš€ è·¯çº¿å›¾

### v2.1 (è®¡åˆ’ä¸­)
- [ ] åŒ–å­¦å­¦ç§‘æ”¯æŒ
- [ ] ç”Ÿç‰©å­¦ç§‘æ”¯æŒ
- [ ] ç”¨æˆ·è´¦æˆ·ç³»ç»Ÿ
- [ ] å¯è§†åŒ–åˆ†äº«åŠŸèƒ½

### v2.2 (è§„åˆ’ä¸­)
- [ ] AIè¾…åŠ©æ¨¡æ¿è®¾è®¡
- [ ] åä½œç¼–è¾‘åŠŸèƒ½
- [ ] æ•°æ®å¯¼å…¥å¯¼å‡º
- [ ] ç§»åŠ¨ç«¯APP

### v3.0 (é•¿æœŸ)
- [ ] å¤šè¯­è¨€æ”¯æŒ
- [ ] å®æ—¶åä½œ
- [ ] äº‘ç«¯åŒæ­¥
- [ ] ä¼ä¸šç‰ˆåŠŸèƒ½

## ğŸ“ æ”¯æŒ

- **æ–‡æ¡£**: [åœ¨çº¿æ–‡æ¡£](https://docs.example.com)
- **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/example/issues)
- **ç¤¾åŒºè®¨è®º**: [è®¨è®ºåŒº](https://github.com/example/discussions)

---

**ä¸‡ç‰©å¯è§†åŒ– v2.0** - è®©æ•°æ®å¯è§†åŒ–å˜å¾—ç®€å•æ™ºèƒ½ âœ¨