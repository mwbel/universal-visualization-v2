## Context

当前万物可视化项目经历了功能迭代，形成了较为复杂的架构：既有预生成的学科可视化页面，又有用户自定义输入功能。这种多入口设计造成了用户认知负担和开发维护成本。项目需要简化为端到端的用户体验，同时保留现有技术投资供未来复用。

### 现状分析
- **前端入口过多**：main-app、GeneralVisualization、ai_visual_*等多个分散入口
- **功能重叠**：预生成页面和自定义功能存在相似的可视化能力
- **用户路径复杂**：用户需要选择不同的模块来实现相似的目标
- **维护成本高**：多套UI和逻辑增加开发和测试复杂度

## Goals / Non-Goals

- **Goals**:
  - 简化为单一核心界面，专注"输入→生成"流程
  - 保持完整的可视化能力（7种概率分布+智能匹配）
  - 保留现有预生成模块供未来复用
  - 提升用户体验和开发效率

- **Non-Goals**:
  - 完全删除预生成模块（而是归档保存）
  - 减少可视化功能类型
  - 改变核心的后端API架构
  - 影响现有的数据生成逻辑

## Decisions

### Decision 1: 归档而非删除预生成模块
**选择**: 将预生成模块移动到 `archive/legacy-modules/` 而非删除
**理由**:
- 这些模块包含了有价值的教学内容和可视化逻辑
- 未来可能需要复用或参考这些实现
- 保持了项目的完整历史和技术积累

### Decision 2: 保持现有后端架构
**选择**: 维持backend-api.py的核心功能不变
**理由**:
- 后端API已经成熟稳定，支持完整的可视化生成流程
- 避免大规模重构带来的风险
- 保持与归档模块的兼容性

### Decision 3: 简化前端为单一界面
**选择**: 将main-app/index.html重构为唯一的核心入口
**理由**:
- 减少用户的选择困惑
- 集中开发资源优化核心体验
- 简化维护和测试流程

## Risks / Trade-offs

### 风险分析
- **功能缺失风险**: 用户可能找不到原有的特定学科模块
  - **缓解措施**: 创建详细的模块索引和使用指南
- **学习成本**: 现有用户需要适应新的界面
  - **缓解措施**: 提供迁移指南和界面引导
- **开发复杂度**: 需要确保新界面包含所有必要功能
  - **缓解措施**: 分阶段重构，充分测试

### 权衡选择
- **简洁性 vs 功能完整性**: 选择适中的简洁度，保留核心功能的同时简化界面
- **开发效率 vs 向后兼容**: 优先考虑开发效率，通过文档保持向后兼容

## Migration Plan

### 阶段1: 准备和分析 (1-2天)
1. 详细梳理现有模块的功能和依赖
2. 创建归档目录结构
3. 制定模块迁移清单

### 阶段2: 模块归档 (1天)
1. 将预生成模块移至archive/legacy-modules/
2. 创建模块索引文档
3. 更新相关引用和链接

### 阶段3: 核心界面重构 (2-3天)
1. 重构main-app/index.html
2. 集成必要的可视化功能
3. 优化用户体验

### 阶段4: 测试和优化 (1-2天)
1. 全面功能测试
2. 性能优化
3. 文档更新

### 回滚计划
- 保留git分支记录，支持快速回滚
- 在archive中保留完整的原模块副本
- 创建回滚脚本，一键恢复原始结构

## Open Questions

1. **用户反馈收集**: 如何收集和响应用户对新界面的反馈？
2. **功能迁移优先级**: 哪些预生成模块的功能最需要优先集成到新界面中？
3. **性能基准**: 新界面应该达到什么样的性能标准？
4. **移动端优化**: 在移动设备上如何平衡功能完整性和界面简洁性？

## 成功标准

1. **用户体验**: 用户能在30秒内完成从输入到可视化的完整流程
2. **功能保持**: 新界面支持所有7种概率分布的可视化生成
3. **性能指标**: 页面加载时间 < 3秒，可视化生成时间 < 5秒
4. **兼容性**: 支持主流浏览器和移动设备
5. **可维护性**: 代码结构清晰，文档完整，便于后续开发